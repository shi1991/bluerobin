{"version":3,"sources":["services/ajax.babel.js"],"names":[],"mappings":";;;;;AAAA,IAAI,QAAQ,EAAR;;AAEJ,IAAI,OAAO,SAAP,IAAO,CAAS,OAAT,EAAkB;AAC3B,MAAI,SAAS,QAAQ,MAAR,IAAkB,KAAlB;;AADc,MAGvB,SAAS,QAAQ,IAAR,IAAgB,EAAhB,CAHc;AAI3B,MAAI,WAAW,QAAQ,QAAR,IAAoB,EAApB;;AAJY,MAMvB,QAAQ,QAAQ,KAAR,IAAiB,IAAjB;;AANe,MAQvB,MAAM,QAAQ,GAAR,IAAe,YAAW,EAAX,CARE;AAS3B,MAAI,SAAU,QAAQ,MAAR,IAAkB,IAAlB,CATa;AAU3B,MAAI,QAAQ,QAAQ,KAAR,IAAiB,IAAjB,CAVe;;AAY3B,MAAI,MAAM,IAAI,cAAJ,EAAN,CAZuB;AAa3B,SAAO,IAAI,OAAJ,CAAY,UAAS,OAAT,EAAkB,MAAlB,EAA0B;;AAE3C,QAAI,kBAAJ,GAAyB,YAAW;AAClC,UAAI,IAAI,UAAJ,KAAmB,CAAnB,IAAwB,IAAI,MAAJ,KAAe,GAAf,EAAoB;;AAE9C,YAAI,SAAS,IAAI,YAAJ,CAFiC;AAG9C,YAAI,aAAa,MAAb,EAAqB;;AAEvB,kBAAQ,KAAK,KAAL,CAAW,MAAX,CAAR,EAFuB;SAAzB,MAGO;AACL,kBAAQ,MAAR,EADK;SAHP;OAHF,MASO;;OATP;KADuB,CAFkB;AAgB3C,QAAI,OAAJ,GAAc,UAAS,CAAT,EAAY;AACxB,aAAO,GAAP,EAAY,CAAZ,EADwB;KAAZ,CAhB6B;;AAoB3C,QAAI,IAAJ,CAAS,OAAO,WAAP,EAAT,EAA+B,MAAM,SAAN,GAAkB,IAAI,IAAJ,GAAW,OAAX,EAAlB,EAAwC,KAAvE,EApB2C;;AAsB3C,QAAG,KAAH,EAAS;AACP,UAAI,gBAAJ,CAAqB,gBAArB,EAAuC,KAAvC,EADO;KAAT;;AAIA,QAAI,WAAW,MAAX,IAAqB,WAAW,KAAX,EAAkB;AACzC,UAAI,gBAAJ,CAAqB,cAArB,EAAqC,iCAArC,EADyC;AAEzC,UAAI,IAAJ,CAAS,KAAK,SAAL,CAAe,MAAf,CAAT,EAFyC;KAA3C,MAGK;AACH,UAAI,IAAJ,GADG;KAHL;GA1BiB,CAAnB,CAb2B;CAAlB;;AAmDX,MAAM,GAAN,GAAY,YAAU,EAAV;;AAIZ,MAAM,IAAN,GAAa,UAAS,IAAT,EAAe;AAC1B,OAAK,MAAL,GAAc,MAAd,CAD0B;AAE1B,SAAO,KAAK,IAAL,CAAP,CAF0B;CAAf;;AAKb,MAAM,GAAN,GAAY,UAAS,IAAT,EAAe;AACzB,SAAO,KAAK,IAAL,CAAP,CADyB;CAAf;;AAIZ,MAAM,MAAN,GAAe,UAAS,IAAT,EAAc;AAC3B,OAAK,MAAL,GAAc,QAAd,CAD2B;AAE3B,SAAO,KAAK,IAAL,CAAP,CAF2B;CAAd;;AAKf,MAAM,GAAN,GAAY,UAAS,IAAT,EAAc;AACxB,OAAK,MAAL,GAAc,KAAd,CADwB;AAExB,SAAO,KAAK,IAAL,CAAP,CAFwB;CAAd;;kBAKG","file":"services/ajax.babel.js","sourcesContent":["let $ajax = {};\r\n\r\nlet ajax = function(setting) {\r\n  let method = setting.method || 'get';\r\n  // let callback = setting.success || function() {};\r\n  let params = setting.data || {};\r\n  let dataType = setting.dataType || '';\r\n  // let beforeSend = setting.beforeSend || undefined;\r\n  let asnyc = setting.asnyc || true;\r\n  // let error = setting.error || function() {};\r\n  let url = setting.url || function() {};\r\n  let header  = setting.header || null;\r\n  let token = setting.token || null;\r\n\r\n  let xhr = new XMLHttpRequest();\r\n  return new Promise(function(resolve, reject) {\r\n\r\n    xhr.onreadystatechange = function() {\r\n      if (xhr.readyState === 4 && xhr.status === 200) {\r\n        // ready\r\n        let result = xhr.responseText;\r\n        if (dataType === 'json') {\r\n\r\n          resolve(JSON.parse(result));\r\n        } else {\r\n          resolve(result);\r\n        }\r\n      } else {\r\n        // not ready\r\n      }\r\n    };\r\n    xhr.onerror = function(e) {\r\n      reject(xhr, e);\r\n    };\r\n\r\n    xhr.open(method.toLowerCase(), url + '?stamp=' + new Date().getTime(), asnyc);\r\n\r\n    if(token){\r\n      xhr.setRequestHeader('x-access-token', token);\r\n    }\r\n\r\n    if (method === 'post' || method === 'put') {\r\n      xhr.setRequestHeader('Content-type', 'application/json; charset=utf-8');\r\n      xhr.send(JSON.stringify(params));\r\n    }else{\r\n      xhr.send();\r\n    }\r\n    \r\n  });\r\n\r\n};\r\n\r\n\r\n$ajax.set = function(){\r\n  \r\n};\r\n\r\n$ajax.post = function(conf) {\r\n  conf.method = 'post';\r\n  return ajax(conf);\r\n};\r\n\r\n$ajax.get = function(conf) {\r\n  return ajax(conf);\r\n};\r\n\r\n$ajax.delete = function(conf){\r\n  conf.method = 'delete';\r\n  return ajax(conf);\r\n};\r\n\r\n$ajax.put = function(conf){\r\n  conf.method = 'put';\r\n  return ajax(conf);\r\n};\r\n\r\nexport default $ajax;\r\n"],"sourceRoot":"/source/"}