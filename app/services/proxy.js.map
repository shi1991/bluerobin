{"version":3,"sources":["services/proxy.babel.js"],"names":[],"mappings":"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","file":"services/proxy.babel.js","sourcesContent":["import Tool from './tool.babel.js';\n\nwindow.CONFIG = {\n  APIROOT: 'http://localhost:1234/api'\n    // APIROOT: 'http://zhanglun.daoapp.io/api'\n};\n\nlet CONFIG = window.CONFIG;\nlet root = CONFIG.APIROOT;\nlet proxy = {};\n\nCONFIG.API = {\n  TASKS: root + '/tasks',\n};\nproxy.Task = {};\nproxy.User = {};\nproxy.Upload = {};\n\n\n\n/**\n * 获取task\n * @param  {[type]} params querystring\n * @return {[type]}        [description]\n */\nproxy.Task.get = function(id) {\n  var url = CONFIG.API.TASKS;\n  if (id) {\n    url = CONFIG.API.TASKS + '/' + id;\n  }\n  return $.ajax({\n    method: 'get',\n    url: url,\n    headers: {\n      'x-access-token': localStorage.token\n    }\n  }).then(function(res) {\n    res.map(function(task) {\n      task.attachments.map(function(attachment) {\n        attachment.previewUrl = Tool.createImagePreviewUrl(attachment.url, 160, 80);\n      });\n    });\n    return res;\n  });\n};\n\n/**\n * 创建 task\n * @param  {[type]} task [description]\n * @return {[type]}      [description]\n */\nproxy.Task.create = function(task) {\n  return $.ajax({\n    method: 'post',\n    url: CONFIG.API.TASKS,\n    data: task,\n    headers: {\n      'x-access-token': localStorage.token\n    }\n  }).then(function(res) {\n    return res;\n  });\n\n};\n\n/**\n * 删除 task\n * @param  {[type]} task [description]\n * @return {[type]}      [description]\n */\nproxy.Task.delete = function(task) {\n  return $.ajax({\n    method: 'delete',\n    url: CONFIG.API.TASKS + '/' + task.id\n  }).then(function(res) {\n    return JSON.parse(res);\n  });\n};\n\n/**\n * [modify description]\n * @param  {[type]} task [description]\n * @return {[type]}      [description]\n */\nproxy.Task.edit = function(task) {\n  return $.ajax({\n      url: root + '/tasks/' + task._id,\n      method: 'put',\n      data: task,\n      dataType: 'json'\n    })\n    .done(function(res) {\n      return res;\n    })\n    .fail(function(xhr) {\n      return xhr;\n    });\n};\n\n\nproxy.User.login = function(user) {\n  return $.ajax({\n    method: 'post',\n    url: root + '/user/login',\n    data: user\n  });\n};\n\nproxy.User.signUp = function(user) {\n  return $.ajax({\n    type: 'post',\n    url: root + '/user/signup',\n    data: user,\n    dataType: 'json'\n  });\n};\n\nproxy.User.authenticate = function() {\n  return $.ajax({\n    method: 'post',\n    url: root + '/user/authenticate',\n    dataType: 'json',\n    headers: {\n      'x-access-token': localStorage.token\n    }\n  });\n};\n\n/**\n * 获取上传token\n * @return {[type]} [description]\n */\nproxy.Upload.getUptoken = function() {\n  return $.ajax({\n      method: 'get'\n    })\n    .done(function(res) {\n      return res;\n    });\n};\n\nexport default proxy;\n"],"sourceRoot":"/source/"}