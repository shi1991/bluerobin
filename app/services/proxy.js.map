{"version":3,"sources":["services/proxy.babel.js"],"names":[],"mappings":"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","file":"services/proxy.babel.js","sourcesContent":["// var root = 'http://jsonplaceholder.typicode.com';\r\n// var root = 'http://localhost:1234/api';\r\nvar root = 'http://zhanglun.daoapp.io/api';\r\n\r\nfunction JSON2FormData(json) {\r\n\r\n  var str = \"\";\r\n  for (var key in json) {\r\n    if (str != \"\") {\r\n      str += \"&\";\r\n    }\r\n    str += key + \"=\" + encodeURIComponent(json[key]);\r\n  }\r\n  return str;\r\n};\r\n\r\n\r\nlet proxy = {};\r\nproxy.Task = {};\r\nproxy.User = {};\r\nproxy.Upload = {};\r\n\r\n/**\r\n * 获取task\r\n * @param  {[type]} params querystring\r\n * @return {[type]}        [description]\r\n */\r\nproxy.Task.get = function(params) {\r\n  return fetch(root + '/tasks', {\r\n      method: 'GET',\r\n      body: params\r\n    })\r\n    .then(function(res) {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n    });\r\n}\r\n\r\n/**\r\n * 创建 task\r\n * @param  {[type]} task [description]\r\n * @return {[type]}      [description]\r\n */\r\nproxy.Task.create = function(task) {\r\n  return fetch(root + '/tasks', {\r\n      method: 'post',\r\n      headers: {\r\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\r\n      },\r\n      body: JSON2FormData(task)\r\n    })\r\n    .then(function(res) {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n    });\r\n\r\n}\r\n\r\n/**\r\n * 删除 task\r\n * @param  {[type]} task [description]\r\n * @return {[type]}      [description]\r\n */\r\nproxy.Task.delete = function(task) {\r\n  return fetch(root + '/tasks/' + task._id, {\r\n      method: 'delete',\r\n      body: task\r\n    })\r\n    .then(function(res) {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n    });\r\n};\r\n\r\n/**\r\n * [modify description]\r\n * @param  {[type]} task [description]\r\n * @return {[type]}      [description]\r\n */\r\nproxy.Task.edit = function(task) {\r\n  return fetch(root + '/tasks/' + task._id, {\r\n      method: 'put',\r\n      headers: {\r\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\r\n      },\r\n      body: JSON2FormData(task)\r\n    })\r\n    .then(function(res) {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n    });\r\n};\r\n\r\n\r\nproxy.getBackgroundImage = function() {\r\n  return fetch('http://ww1.sinaimg.cn/large/7e8b4ac8jw1ez8vuclmvcj21hc0xc7fn.jpg')\r\n    .then(function(res) {\r\n      return res.blob();\r\n    })\r\n    .then(function(myBlob) {\r\n      var objectURL = URL.createObjectURL(myBlob);\r\n      return objectURL;\r\n    });\r\n}\r\n\r\n\r\nproxy.User.login = function(user) {\r\n  return fetch(root + \"/user/login\", {\r\n      method: 'post',\r\n      headers: {\r\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\r\n      },\r\n      body: JSON2FormData(user)\r\n    })\r\n    .then(function(res) {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n    });\r\n}\r\n\r\n\r\n/**\r\n * 获取上传token\r\n * @return {[type]} [description]\r\n */\r\nproxy.Upload.getUptoken = function(){\r\n  return fetch(root + '/qiniu/token', {\r\n    method: 'get'\r\n  })\r\n  .then(function(res){\r\n    if(res.ok){\r\n      return res.json();\r\n    }\r\n  });\r\n};\r\n\r\nexport default proxy\r\n"],"sourceRoot":"/source/"}