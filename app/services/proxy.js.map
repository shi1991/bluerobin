{"version":3,"sources":["services/proxy.babel.js"],"names":[],"mappings":"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","file":"services/proxy.babel.js","sourcesContent":["import $ajax from './ajax.babel.js';\n\nwindow.CONFIG = {\n    APIROOT: 'http://127.0.0.1:1234/api'\n    // APIROOT: 'http://zhanglun.daoapp.io/api'\n};\n\nlet root = window.CONFIG.APIROOT;\n\nfunction JSON2FormData(json) {\n\n  var str = '';\n  for (var key in json) {\n    if (str !== '') {\n      str += '&';\n    }\n    str += key + '=' + encodeURIComponent(json[key]);\n  }\n  return str;\n}\n\n\nlet proxy = {};\nproxy.Task = {};\nproxy.User = {};\nproxy.Upload = {};\n\nwindow.CONFIG.API = {\n  TASKS: root + '/tasks',\n};\n\n/**\n * 获取task\n * @param  {[type]} params querystring\n * @return {[type]}        [description]\n */\nproxy.Task.get = function(params) {\n  return $ajax.get({\n    url: CONFIG.API.TASKS,\n    data: params,\n    token: localStorage.token\n  }).then(function(res) {\n    return JSON.parse(res);\n  });\n};\n\n/**\n * 创建 task\n * @param  {[type]} task [description]\n * @return {[type]}      [description]\n */\nproxy.Task.create = function(task) {\n  return $ajax.post({\n    url: CONFIG.API.TASKS,\n    data: task,\n    token: localStorage.token\n  }).then(function(res) {\n    return JSON.parse(res);\n  });\n\n};\n\n/**\n * 删除 task\n * @param  {[type]} task [description]\n * @return {[type]}      [description]\n */\nproxy.Task.delete = function(task) {\n  return $ajax.delete({\n    url: CONFIG.API.TASKS + '/' + task._id\n  }).then(function(res) {\n    return JSON.parse(res);\n  });\n};\n\n/**\n * [modify description]\n * @param  {[type]} task [description]\n * @return {[type]}      [description]\n */\nproxy.Task.edit = function(task) {\n  return $.ajax({\n    url: root + '/tasks/' + task._id,\n    method: 'put',\n    data: task,\n    dataType: 'json'\n  })\n  .done(function(res){\n    return res;\n  })\n  .fail(function(xhr){\n    return xhr;\n  });\n};\n\n\nproxy.User.login = function(user) {\n  return $ajax.post({\n    url: root + '/user/login',\n    data: user\n  }).then(function(res) {\n    return JSON.parse(res);\n  });\n};\n\n\nproxy.User.authenticate = function(user){\n  return $ajax.post({\n    url: root + '/user/authenticate',\n    token: localStorage.token\n  }).then(function(token){\n    return JSON.parse(token);\n  });\n};\n\n/**\n * 获取上传token\n * @return {[type]} [description]\n */\nproxy.Upload.getUptoken = function() {\n  return fetch(root + '/qiniu/token', {\n      method: 'get'\n    })\n    .then(function(res) {\n      if (res.ok) {\n        return res.json();\n      }\n    });\n};\n\nwindow.$ajax = $ajax;\nwindow.$get = $ajax.get;\n\n\nexport default proxy;\n"],"sourceRoot":"/source/"}